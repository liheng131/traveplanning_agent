# Text2SQL
è¯¥é¡¹ç›®ä½¿ç”¨ LangGraph ä¸é«˜å¾·åœ°å›¾ä»¥åŠ 12306 ç¥¨åŠ¡æ•°æ®çš„ MCP æ„å»ºå¤šä»£ç†ç³»ç»Ÿï¼ŒåŸºäºç”¨æˆ·çš„å‡ºå‘åœ°ä¸ç›®çš„åœ°ï¼Œå®ç°æ™ºèƒ½è·¯çº¿è§„åˆ’ã€‚

è¯¥ä»£ç†ç”±ä¸‰ä¸ªè¿‡ç¨‹ç»„æˆï¼š
1. supervisor ä»£ç†æ ¹æ®ç”¨æˆ·æŸ¥è¯¢çš„ç›®çš„åœ°ã€å‡ºå‘åœ°ä»¥åŠæœŸæœ›çš„å‡ºè¡Œæ–¹å¼ï¼Œå°†æ•´ä½“ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªå­ä»»åŠ¡ã€‚
2. navigation_expert å’Œ ticketing_expert ä»£ç†åˆ†åˆ«æ‰§è¡Œç”± supervisor åˆ†é…çš„è·¯å¾„è§„åˆ’ä¸ç¥¨åŠ¡æŸ¥è¯¢ä»»åŠ¡ã€‚
3. æ‰€æœ‰æŸ¥è¯¢ä»»åŠ¡å®Œæˆåï¼Œå°†æ‰€æœ‰ä¸­é—´çŠ¶æ€ä¿¡æ¯äº¤ç”± LLM å¤„ç†ï¼Œå¹¶ç”Ÿæˆæœ€ç»ˆçš„è‡ªç„¶è¯­è¨€å›å¤ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚

## æ–‡ä»¶å¤¹ç»“æ„

```plaintext
ğŸ“¦ Travel_Planning
â”œâ”€â”€ ğŸ“ config                                           # Travel_Planning ä»£ç 
â”‚   â”œâ”€â”€ ğŸ“„ __init__.py                                  # å°†ç›®å½•è®¾ä¸º Python åŒ…
â”‚   â”œâ”€â”€ ğŸ“„ agent_workflow.py                            # TravelAgent ä»£ç†ç±»
â”‚   â”œâ”€â”€ ğŸ“„ agents_config.py                             # ä»£ç†é…ç½®å‡½æ•°
â”‚   â””â”€â”€ ğŸ“„ prompts.py                                   # ç³»ç»Ÿæç¤ºè¯
â”‚
â”œâ”€â”€ ğŸ“ example                                          # ä½¿ç”¨ä»£ç†ç¤ºä¾‹
â”œâ”€â”€ âš™ï¸ .env                                             # .env æ–‡ä»¶æ¨¡æ¿
â”œâ”€â”€ ğŸ“„ README.md                                        # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ requirements.txt                                 # ä¾èµ–é¡¹åˆ—è¡¨
â”œâ”€â”€ âš™ï¸ servers_config.json                              # é«˜å¾·åœ°å›¾å’Œ12306ç¥¨åŠ¡æ•°æ®çš„MCPé…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ streamlit_front.py                               # å‰ç«¯è„šæœ¬
é…ç½®
```

## ä¾èµ–é¡¹

1. **åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ**

    ä½¿ç”¨condaåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼š

    ```bash
    conda create --name travel_planning python=3.12 -y
    ```

    æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š
     
     ```bash
    conda activate travel_planning
    ```

2. **ä½¿ç”¨ pip åŒæ­¥ä¾èµ–é¡¹**ï¼š

    ```bash
    pip install -r requirements.txt
    ```
    
    æ­¤å‘½ä»¤å°†åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£… requirements.txt æ–‡ä»¶ä¸­å®šä¹‰çš„ä¾èµ–é¡¹ã€‚

## ç¯å¢ƒå˜é‡

è¯¥é¡¹ç›®éœ€è¦OpenAIçš„API Keyä»¥åŠé«˜å¾·åœ°å›¾å¼€æ”¾å¹³å°çš„API Key. è¿™äº›åº”å†™åœ¨.envæ–‡ä»¶ä¸­ã€‚

`AMAP_MAPS_API_KEY= = '4a1..................'`

`OPENAI_API_KEY = 'sk-WrrN..................'`


## ä½¿ç”¨æµç¨‹

2. é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ streamlit_front å‰ç«¯ï¼š
    ```bash
    streamlit run streamlit_front.py --server.port 8003
    ```
